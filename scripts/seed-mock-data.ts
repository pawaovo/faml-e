import { createClient } from '@supabase/supabase-js';
import { MoodType } from '../src/types';
import { config } from 'dotenv';
import { fileURLToPath } from 'url';
import { dirname, join } from 'path';

// åŠ è½½ .env.local æ–‡ä»¶
const __dirname = dirname(fileURLToPath(import.meta.url));
config({ path: join(__dirname, '..', '.env.local') });

// Supabase é…ç½®
const supabaseUrl = process.env.VITE_SUPABASE_URL!;
const supabaseKey = process.env.VITE_SUPABASE_ANON_KEY!;
const supabase = createClient(supabaseUrl, supabaseKey);

// å›ºå®šç”¨æˆ· IDï¼ˆå¼€å‘é˜¶æ®µä½¿ç”¨ï¼‰
const DEMO_USER_ID = 'demo_user';

// ç”Ÿæˆéšæœºæ—¶é—´æˆ³ï¼ˆåœ¨æŒ‡å®šæ—¥æœŸèŒƒå›´å†…éšæœºæ—¶é—´ï¼‰
function randomTimestamp(year: number, month: number, day: number): string {
  const date = new Date(year, month - 1, day);
  // åœ¨å½“å¤© 8:00 - 23:00 ä¹‹é—´éšæœº
  const randomHour = Math.floor(Math.random() * 15) + 8; // 8-23æ—¶
  const randomMinute = Math.floor(Math.random() * 60);
  date.setHours(randomHour, randomMinute, 0);
  return date.toISOString();
}

// å¤§å­¦ç”Ÿæ—¥è®°å†…å®¹ - çœŸå®åœºæ™¯æ¨¡æ‹Ÿ
const journalEntries = [
  // 11æœˆæ•°æ®
  {
    date: [2025, 11, 1],
    content: "æœŸä¸­è€ƒè¯•ç»ˆäºç»“æŸäº†ï¼æ„Ÿè§‰è¿˜è¡Œï¼Œé«˜æ•°åº”è¯¥èƒ½ä¸Š80ã€‚ä»Šå¤©å’Œå®¤å‹ä¸€èµ·å»åƒäº†æµ·åº•æï¼Œåº†ç¥è€ƒè¯•ç»“æŸï¼Œå¥½å¼€å¿ƒï½",
    mood: MoodType.HAPPY,
    images: true
  },
  {
    date: [2025, 11, 3],
    content: "æ•°æ®ç»“æ„ä½œä¸šå¤ªéš¾äº†...ç®—æ³•é¢˜æƒ³äº†åŠå¤©æ²¡æ€è·¯ã€‚åœ¨å›¾ä¹¦é¦†å¾…äº†ä¸€æ•´å¤©ï¼Œçœ¼ç›éƒ½å¿«çäº†ã€‚æœ‰ç‚¹ç„¦è™‘è¿™å‘¨æœ«èƒ½ä¸èƒ½äº¤ã€‚",
    mood: MoodType.ANXIOUS,
    images: false
  },
  {
    date: [2025, 11, 5],
    content: "ä»Šå¤©å‚åŠ äº†å­¦ç”Ÿä¼šé¢è¯•ï¼Œç´§å¼ å¾—æ‰‹å¿ƒéƒ½æ˜¯æ±—ã€‚ç»“æœå±…ç„¶è¿‡äº†ï¼æˆä¸ºäº†å®£ä¼ éƒ¨çš„ä¸€å‘˜ï¼Œç»ˆäºå¯ä»¥åšäº›æœ‰æ„ä¹‰çš„äº‹æƒ…äº†ã€‚",
    mood: MoodType.HAPPY,
    images: true
  },
  {
    date: [2025, 11, 7],
    content: "å’Œå¦ˆå¦ˆè§†é¢‘é€šè¯ï¼Œå¥¹è¯´å®¶é‡Œä¸€åˆ‡éƒ½å¥½ã€‚çªç„¶æœ‰ç‚¹æƒ³å®¶ï¼Œè™½ç„¶åœ¨å­¦æ ¡å¾ˆå……å®ï¼Œä½†è¿˜æ˜¯æƒ³å¿µå¦ˆå¦ˆåšçš„èœã€‚",
    mood: MoodType.SAD,
    images: false
  },
  {
    date: [2025, 11, 9],
    content: "å®¤å‹ç†¬å¤œæ‰“æ¸¸æˆï¼Œåµå¾—æˆ‘ç¡ä¸ç€ã€‚æ˜å¤©æ—©ä¸Šè¿˜æœ‰æ—©å…«ï¼ŒçœŸæ˜¯æ°”æ­»æˆ‘äº†ï¼æ²Ÿé€šè¿‡å¥½å‡ æ¬¡äº†ï¼Œè¿˜æ˜¯è€æ ·å­ã€‚",
    mood: MoodType.ANGRY,
    images: false
  },
  {
    date: [2025, 11, 12],
    content: "ä»Šå¤©è‹±è¯­è¯¾ä¸Šè€å¸ˆè¡¨æ‰¬äº†æˆ‘çš„presentationï¼Œè¯´æˆ‘çš„å‘éŸ³æœ‰è¿›æ­¥ã€‚å¼€å¿ƒï¼åŠªåŠ›æ²¡æœ‰ç™½è´¹ï½",
    mood: MoodType.HAPPY,
    images: false
  },
  {
    date: [2025, 11, 15],
    content: "åŒåä¸€å‰æ‰‹äº†ï¼Œä¹°äº†å¥½å¤šä¸œè¥¿ã€‚èŠ±äº†ä¸€ä¸ªæœˆçš„ç”Ÿæ´»è´¹ï¼Œç°åœ¨æœ‰ç‚¹åæ‚”...ä¸è¿‡éƒ½æ˜¯éœ€è¦çš„ï¼Œè‡ªæˆ‘å®‰æ…°ä¸€ä¸‹ã€‚",
    mood: MoodType.NEUTRAL,
    images: true
  },
  {
    date: [2025, 11, 18],
    content: "ç¤¾å›¢æ´»åŠ¨ä»Šå¤©å»æ•¬è€é™¢åšå¿—æ„¿è€…ï¼Œè€äººä»¬å¾ˆå¯çˆ±ã€‚é™ªä»–ä»¬ä¸‹æ£‹èŠå¤©ï¼Œæ„Ÿè§‰å¾ˆæœ‰æ„ä¹‰ã€‚å¸Œæœ›ä¸‹æ¬¡è¿˜èƒ½å»ã€‚",
    mood: MoodType.HAPPY,
    images: true
  },
  {
    date: [2025, 11, 21],
    content: "ä»Šå¤©å’Œé—ºèœœåµæ¶äº†ï¼Œå› ä¸ºä¸€äº›å°äº‹ã€‚ç°åœ¨ä¸€ä¸ªäººåœ¨å®¿èˆï¼Œå¿ƒæƒ…å¾ˆå¤æ‚ã€‚æ˜¯ä¸æ˜¯æˆ‘å¤ªæ•æ„Ÿäº†ï¼Ÿ",
    mood: MoodType.SAD,
    images: false
  },
  {
    date: [2025, 11, 24],
    content: "æ”¶åˆ°äº†ç§‹æ‹›çš„ç¬¬ä¸€ä»½é¢è¯•é€šçŸ¥ï¼è™½ç„¶æ˜¯å°å…¬å¸ï¼Œä½†è¿˜æ˜¯å¾ˆæ¿€åŠ¨ã€‚è¦è®¤çœŸå‡†å¤‡ï¼Œå¸Œæœ›èƒ½æ‹¿åˆ°offerã€‚",
    mood: MoodType.HAPPY,
    images: false
  },
  {
    date: [2025, 11, 26],
    content: "ä»Šå¤©ä½“æµ‹800ç±³ï¼Œè·‘å¾—å¿«æ–­äº†æ°”ã€‚æˆç»©åŠæ ¼äº†ï¼Œä½†æ„Ÿè§‰èº«ä½“çŠ¶å†µä¸å¤ªå¥½ã€‚å¾—å¼€å§‹é”»ç‚¼äº†ï¼Œä¸èƒ½æ€»æ˜¯ç†¬å¤œã€‚",
    mood: MoodType.ANXIOUS,
    images: false
  },
  {
    date: [2025, 11, 29],
    content: "å’Œå®¤å‹ä¸€èµ·åŒ…é¥ºå­ï¼Œè™½ç„¶å½¢çŠ¶å¾ˆå¥‡æ€ªï¼Œä½†æ˜¯å¤§å®¶ä¸€èµ·åšå¾ˆå¼€å¿ƒã€‚æ„Ÿå—åˆ°äº†é›†ä½“çš„æ¸©æš–ï½",
    mood: MoodType.HAPPY,
    images: true
  },
  // 12æœˆæ•°æ®ï¼ˆæˆªæ­¢åˆ°12æœˆ6æ—¥ï¼‰
  {
    date: [2025, 12, 1],
    content: "12æœˆäº†ï¼æ—¶é—´è¿‡å¾—çœŸå¿«ï¼Œè¿™å­¦æœŸå°±è¦ç»“æŸäº†ã€‚è¿˜æœ‰å¥½å¤šä½œä¸šæ²¡å†™ï¼Œæœ‰ç‚¹æ…Œ...",
    mood: MoodType.ANXIOUS,
    images: false
  },
  {
    date: [2025, 12, 2],
    content: "ä»Šå¤©å‚åŠ äº†æ ¡å›­æ­Œæ‰‹å¤§èµ›ï¼Œè™½ç„¶æ²¡è¿›å†³èµ›ï¼Œä½†åœ¨èˆå°ä¸Šå”±æ­Œçš„æ„Ÿè§‰è¶…æ£’ï¼å°ä¸‹å¥½å¤šäººç»™æˆ‘é¼“æŒï¼Œå¾ˆå¼€å¿ƒã€‚",
    mood: MoodType.HAPPY,
    images: true
  },
  {
    date: [2025, 12, 3],
    content: "å¯¼å‘˜æ‰¾æˆ‘è°ˆè¯ï¼Œè¯´æˆ‘æœ€è¿‘ä¸Šè¯¾çŠ¶æ€ä¸å¤ªå¥½ã€‚ç¡®å®æœ‰ç‚¹åˆ†å¿ƒï¼ŒæœŸæœ«å‹åŠ›å¤ªå¤§äº†ã€‚è¦è°ƒæ•´ä¸€ä¸‹å¿ƒæ€ã€‚",
    mood: MoodType.NEUTRAL,
    images: false
  },
  {
    date: [2025, 12, 4],
    content: "å’Œæš—æ‹çš„TAä¸€èµ·ä¸Šè‡ªä¹ ï¼Œå¿ƒè·³å¥½å¿«ï¼TAè¿˜ä¸»åŠ¨é—®æˆ‘é—®é¢˜ï¼Œæ„Ÿè§‰æœ‰å¸Œæœ›ï¼Ÿä¹Ÿè®¸æ˜¯æˆ‘å¤šæƒ³äº†...",
    mood: MoodType.HAPPY,
    images: false
  },
  {
    date: [2025, 12, 6],
    content: "ä»Šå¤©ä¸‹é›ªäº†ï¼åŒ—äº¬çš„ç¬¬ä¸€åœºé›ªï¼Œå’Œæœ‹å‹ä»¬ä¸€èµ·æ‰“é›ªä»—ï¼Œå¼€å¿ƒå¾—åƒä¸ªå­©å­ã€‚é›ªæ™¯çœŸçš„å¾ˆç¾ï¼Œæ‹äº†å¾ˆå¤šç…§ç‰‡ã€‚",
    mood: MoodType.HAPPY,
    images: true
  }
];

// AI å¯¹è¯æ•°æ® - çœŸå®å¯¹è¯åœºæ™¯ï¼ˆéæ€»ç»“å¼ï¼‰
const aiSummaries = [
  "çœ‹åˆ°ä½ è€ƒè¯•ç»“æŸäº†è¿˜å»èšé¤åº†ç¥ï¼Œè¿™ç§åŠ³é€¸ç»“åˆçš„æ–¹å¼å¾ˆæ£’å‘¢ï¼è®°å¾—å¥½å¥½ä¼‘æ¯ï¼Œä¸ºæ¥ä¸‹æ¥çš„å­¦ä¹ å……ç”µï½ ğŸ½ï¸",
  "ç®—æ³•é¢˜ç¡®å®éœ€è¦æ—¶é—´æ²‰æ·€ï¼Œåˆ«å¤ªç€æ€¥ã€‚åœ¨å›¾ä¹¦é¦†æ³¡ä¸€æ•´å¤©è¯´æ˜ä½ å¾ˆåŠªåŠ›ï¼Œä¼‘æ¯ä¸€ä¸‹å†æ¥çœ‹å¯èƒ½ä¼šæœ‰æ–°æ€è·¯å“¦ï¼ğŸ’¡",
  "æ­å–œä½ åŠ å…¥å­¦ç”Ÿä¼šï¼é¢è¯•æ—¶çš„ç´§å¼ è¯´æ˜ä½ å¾ˆé‡è§†è¿™ä¸ªæœºä¼šï¼Œé€šè¿‡äº†è¯´æ˜ä½ çš„å®åŠ›è¢«è®¤å¯äº†ã€‚åŠ æ²¹ï¼Œç›¸ä¿¡ä½ ä¼šåœ¨å®£ä¼ éƒ¨å‘å…‰çš„ï¼âœ¨",
  "æƒ³å®¶æ˜¯å¾ˆæ­£å¸¸çš„æƒ…æ„Ÿå‘¢ï¼Œè¯´æ˜ä½ æ˜¯ä¸ªé‡æ„Ÿæƒ…çš„äººã€‚è™½ç„¶æƒ³å¿µå¦ˆå¦ˆåšçš„èœï¼Œä½†åœ¨å­¦æ ¡ä¹Ÿè¦å¥½å¥½ç…§é¡¾è‡ªå·±å‘€ï½ ğŸ¥°",
  "å®¤å‹çš„ä½œæ¯ç¡®å®ä¼šå½±å“ä¼‘æ¯ï¼Œä½ å·²ç»å°è¯•æ²Ÿé€šè¿‡äº†ï¼Œå¾ˆæ£’ã€‚ä¹Ÿè®¸å¯ä»¥è¯•è¯•æˆ´è€³å¡ï¼Œæˆ–è€…å’Œè¾…å¯¼å‘˜åæ˜ ä¸€ä¸‹æƒ…å†µï¼Ÿ",
  "ä½ çš„è‹±è¯­å‘éŸ³è¿›æ­¥è¢«è€å¸ˆè®¤å¯ï¼Œè¿™ä¸€å®šæ˜¯ä½ å¹³æ—¶åŠªåŠ›ç»ƒä¹ çš„ç»“æœï¼ç»§ç»­ä¿æŒï¼Œè¯´ä¸å®šæœªæ¥èƒ½æˆä¸ºç¿»è¯‘å®˜å‘¢ï½ ğŸŒ",
  "åŒåä¸€è´­ç‰©åçš„å°æ‡Šæ¼å¾ˆæ­£å¸¸å•¦ï¼Œä¸è¿‡å¦‚æœéƒ½æ˜¯å¿…éœ€å“ï¼Œé‚£å°±åˆç†è§„åˆ’æ”¯å‡ºã€‚å¯ä»¥åšä¸ªè®°è´¦è®¡åˆ’ï¼ŒåŸ¹å…»ç†è´¢ä¹ æƒ¯å“¦ï¼ğŸ’°",
  "å»æ•¬è€é™¢åšå¿—æ„¿è€…çœŸçš„å¾ˆæœ‰æ„ä¹‰ï¼é™ªä¼´è€äººçš„åŒæ—¶ï¼Œä½ ä¹Ÿåœ¨æ”¶è·äººç”Ÿé˜…å†ã€‚è¿™ç§å…¬ç›Šæ´»åŠ¨èƒ½è®©ä½ æ„Ÿå—åˆ°ä¸ä¸€æ ·çš„æ¸©æš–ï½ ğŸ«‚",
  "æœ‹å‹ä¹‹é—´æœ‰å°æ‘©æ“¦æ˜¯å¾ˆæ­£å¸¸çš„ï¼Œè¯´æ˜ä½ ä»¬éƒ½å¾ˆåœ¨æ„è¿™æ®µå‹æƒ…ã€‚å†·é™ä¸‹æ¥åå¥½å¥½èŠèŠï¼Œç›¸ä¿¡ä¼šè§£å¼€çš„ã€‚ä¸è¦å¤ªè‡ªè´£å“¦ï½ ğŸ¤—",
  "ç¬¬ä¸€ä»½é¢è¯•é€šçŸ¥å€¼å¾—åº†ç¥ï¼ä¸ç®¡å…¬å¸å¤§å°ï¼Œéƒ½æ˜¯å¯¹ä½ èƒ½åŠ›çš„è®¤å¯ã€‚è®¤çœŸå‡†å¤‡ï¼ŒæŠŠæ¯æ¬¡é¢è¯•éƒ½å½“ä½œå­¦ä¹ å’Œæˆé•¿çš„æœºä¼šï¼ğŸ’¼",
  "ä½“æµ‹åŠæ ¼å°±å¾ˆæ£’äº†ï¼æ„è¯†åˆ°è¦é”»ç‚¼èº«ä½“æ˜¯å¾ˆé‡è¦çš„ç¬¬ä¸€æ­¥ï¼Œå¯ä»¥ä»æ¯å¤©æ•£æ­¥20åˆ†é’Ÿå¼€å§‹ï¼Œæ…¢æ…¢å»ºç«‹è¿åŠ¨ä¹ æƒ¯ã€‚ğŸ’ª",
  "å’Œå®¤å‹ä¸€èµ·åŒ…é¥ºå­çš„æ¸©é¦¨æ—¶å…‰æœ€çè´µäº†ï¼å½¢çŠ¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯å¤§å®¶ä¸€èµ·åˆ¶ä½œçš„è¿‡ç¨‹å’Œåˆ†äº«çš„å¿«ä¹ï½ ğŸ¥Ÿ",
  "12æœˆç¡®å®æ˜¯å¿™ç¢Œçš„ä¸€ä¸ªæœˆï¼Œä½†ä¹Ÿæ˜¯æ”¶è·çš„å­£èŠ‚ã€‚æŠŠä½œä¸šåˆ—ä¸ªæ¸…å•ï¼Œä¸€ä»¶ä¸€ä»¶æ¥å®Œæˆï¼Œä½ ä¼šå‘ç°æ²¡é‚£ä¹ˆå¯æ€•çš„ï¼ğŸ“",
  "ç«™åœ¨èˆå°ä¸Šå”±æ­Œéœ€è¦å¾ˆå¤§å‹‡æ°”å‘¢ï¼è§‚ä¼—çš„æŒå£°å°±æ˜¯å¯¹ä½ æœ€å¤§çš„è‚¯å®šã€‚æ²¡è¿›å†³èµ›æ²¡å…³ç³»ï¼Œé‡è¦çš„æ˜¯ä½ æ•¢äºå±•ç¤ºè‡ªå·±ï¼ğŸ¤",
  "å¯¼å‘˜å…³å¿ƒä½ çš„å­¦ä¹ çŠ¶æ€è¯´æ˜å¾ˆé‡è§†ä½ ã€‚æœŸæœ«å‹åŠ›å¤§æ˜¯æ­£å¸¸çš„ï¼ŒåŠæ—¶è°ƒæ•´å¿ƒæ€å¾ˆé‡è¦ã€‚ä½ å·²ç»æ„è¯†åˆ°äº†é—®é¢˜ï¼Œè¿™å°±å¾ˆå¥½ï¼ğŸŒ±",
  "å’Œå–œæ¬¢çš„äººä¸€èµ·è‡ªä¹ ï¼Œé‚£ç§å°å¿ƒè·³çš„æ„Ÿè§‰çœŸçš„å¾ˆç¾å¥½ï½ä¸ç®¡æ˜¯å‹æƒ…è¿˜æ˜¯çˆ±æƒ…ï¼Œèƒ½ä¸“æ³¨å­¦ä¹ çš„æ—¶å…‰éƒ½å€¼å¾—çæƒœã€‚åŠ æ²¹ï¼â¤ï¸",
  "åŒ—äº¬çš„é›ªæ™¯æ€»æ˜¯ç‰¹åˆ«æµªæ¼«ï¼å’Œæœ‹å‹ä»¬åœ¨é›ªä¸­ç©è€çš„å¿«ä¹æ—¶å…‰ä¼šæ˜¯å¾ˆçè´µçš„å›å¿†ã€‚è®°å¾—ä¿æš–ï¼Œåˆ«æ„Ÿå†’äº†ï½â›„ï¸"
];

// æ¨¡æ‹Ÿå›¾ç‰‡URLï¼ˆéšæœºé€‰æ‹©ä¸€äº›åœ¨çº¿å›¾ç‰‡å ä½ï¼‰
const mockImageUrls = [
  'https://images.unsplash.com/photo-1507591064344-4c6ce005b128?w=300&h=300&fit=crop',
  'https://images.unsplash.com/photo-1519452575417-564c1401ecc0?w=300&h=300&fit=crop',
  'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=300&h=300&fit=crop',
  'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300&h=300&fit=crop',
  'https://images.unsplash.com/photo-1536064479547-7ee40b74b807?w=300&h=300&fit=crop'
];

// æ’å…¥æ—¥è®°æ•°æ®
async function insertJournalData() {
  console.log('ğŸŒ± å¼€å§‹æ’å…¥æ—¥è®°æ•°æ®...');

  try {
    for (let i = 0; i < journalEntries.length; i++) {
      const entry = journalEntries[i];
      const [year, month, day] = entry.date;

      // éšæœºé€‰æ‹© 1-3 å¼ å›¾ç‰‡
      const images = entry.images ?
        Array.from({ length: Math.floor(Math.random() * 3) + 1 }, () =>
          mockImageUrls[Math.floor(Math.random() * mockImageUrls.length)]
        ) : null;

      const { data, error } = await supabase
        .from('journals')
        .insert({
          user_id: DEMO_USER_ID,
          content: entry.content,
          summary: aiSummaries[i],
          mood: entry.mood,
          images: images,
          created_at: randomTimestamp(year, month, day)
        })
        .select();

      if (error) {
        console.error(`æ’å…¥ç¬¬${i + 1}æ¡æ—¥è®°å¤±è´¥:`, error);
      } else {
        console.log(`âœ… ç¬¬${i + 1}æ¡æ—¥è®°æ’å…¥æˆåŠŸ: ${year}-${month}-${day}`);
      }
    }
  } catch (error) {
    console.error('æ’å…¥æ•°æ®æ—¶å‘ç”Ÿé”™è¯¯:', error);
  }
}

// æ’å…¥èŠå¤©ä¼šè¯å’Œæ¶ˆæ¯æ•°æ®
async function insertChatData() {
  console.log('ğŸ’¬ å¼€å§‹æ’å…¥èŠå¤©æ•°æ®...');

  try {
    // åˆ›å»ºä¸€äº›èŠå¤©ä¼šè¯
    const sessions = [
      { persona: 'healing' },
      { persona: 'rational' },
      { persona: 'fun' }
    ];

    for (const sessionData of sessions) {
      // æ’å…¥ä¼šè¯
      const { data: session, error: sessionError } = await supabase
        .from('chat_sessions')
        .insert({
          user_id: DEMO_USER_ID,
          persona: sessionData.persona
        })
        .select()
        .single();

      if (sessionError) {
        console.error('æ’å…¥ä¼šè¯å¤±è´¥:', sessionError);
        continue;
      }

      console.log(`âœ… åˆ›å»º${sessionData.persona}äººæ ¼ä¼šè¯æˆåŠŸ`);

      // ä¸ºæ¯ä¸ªä¼šè¯æ’å…¥ä¸€äº›ç¤ºä¾‹æ¶ˆæ¯
      const sampleMessages = [
        {
          role: 'user' as const,
          content: sessionData.persona === 'healing' ? 'æœ€è¿‘å‹åŠ›æœ‰ç‚¹å¤§ï¼Œæ„Ÿè§‰å¾ˆç„¦è™‘...' :
                   sessionData.persona === 'rational' ? 'æˆ‘æ€»æ˜¯æ‹…å¿ƒè‡ªå·±åšå¾—ä¸å¤Ÿå¥½ï¼Œæ€ä¹ˆåŠï¼Ÿ' :
                   'æœ€è¿‘ä»€ä¹ˆéƒ½ä¸æƒ³å¹²ï¼Œåªæƒ³èººå¹³ï¼Œæ­£å¸¸å—ï¼Ÿ',
          created_at: randomTimestamp(2025, 11, Math.floor(Math.random() * 20) + 1)
        },
        {
          role: 'model' as const,
          content: sessionData.persona === 'healing' ? 'äº²çˆ±çš„ï¼Œç„¦è™‘æ˜¯å¾ˆæ­£å¸¸çš„æƒ…ç»ªå‘¢ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ·±å‘¼å¸ï¼Œæ…¢æ…¢æ¥ï¼Œå¥½å—ï¼Ÿè®°ä½ä½ å·²ç»å¾ˆåŠªåŠ›äº†ã€‚ğŸŒ¸' :
                   sessionData.persona === 'rational' ? 'è®©æˆ‘ä»¬ç†æ€§åˆ†æä¸€ä¸‹ï¼š"åšå¾—ä¸å¤Ÿå¥½"è¿™ä¸ªæƒ³æ³•ï¼Œæœ‰ä»€ä¹ˆå…·ä½“è¯æ®æ”¯æŒå—ï¼Ÿæˆ‘ä»¬æ¥åšä¸€æ¬¡æ€ç»´å®éªŒã€‚ğŸ§ ' :
                   'å“ˆå“ˆå“ˆå“ˆï¼Œåªæƒ³èººå¹³è¿™ä¸æ˜¯å¾ˆæ­£å¸¸å—ï¼å½“ä»£å¤§å­¦ç”Ÿçš„æ ‡é…ï¼ä¸è¿‡èººå¹³ä¹‹åï¼Œè¦ä¸è¦è€ƒè™‘ä¸‹ç«æ˜Ÿä¹‹æ—…ï¼ŸğŸš€',
          created_at: randomTimestamp(2025, 11, Math.floor(Math.random() * 20) + 1)
        }
      ];

      for (const message of sampleMessages) {
        const { error: messageError } = await supabase
          .from('chat_messages')
          .insert({
            session_id: session.id,
            role: message.role,
            content: message.content,
            created_at: message.created_at
          });

        if (messageError) {
          console.error('æ’å…¥æ¶ˆæ¯å¤±è´¥:', messageError);
        }
      }

      console.log(`âœ… ${sessionData.persona}ä¼šè¯æ¶ˆæ¯æ’å…¥æˆåŠŸ`);
    }
  } catch (error) {
    console.error('æ’å…¥èŠå¤©æ•°æ®æ—¶å‘ç”Ÿé”™è¯¯:', error);
  }
}

// ä¸»å‡½æ•°
async function main() {
  console.log('ğŸ¯ å¼€å§‹ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®...');

  await insertJournalData();
  await insertChatData();

  console.log('ğŸ‰ æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆå®Œæˆï¼');
  console.log('ğŸ“ å·²ç”Ÿæˆæ—¥è®°æ•°æ®ï¼š', journalEntries.length, 'æ¡');
  console.log('ğŸ’¬ å·²ç”ŸæˆèŠå¤©ä¼šè¯ï¼š3ä¸ª');
}

// è¿è¡Œä¸»å‡½æ•°
main().catch(console.error);