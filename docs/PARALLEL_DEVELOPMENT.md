# FamlÃ©e å¹¶è¡Œå¼€å‘æŒ‡å—

> **ç›®æ ‡**ï¼šé€šè¿‡ 4 ä¸ª Claude Code çª—å£å¹¶è¡Œå¼€å‘ï¼Œ5-7 å¤©å®Œæˆåç«¯åŠŸèƒ½
> **ç­–ç•¥**ï¼šGit åˆ†æ”¯éš”ç¦» + ä»»åŠ¡æ‹†è§£ + æœ€å°åŒ–å‰ç«¯æ”¹åŠ¨

---

## ğŸ“‹ æ€»è§ˆ

### å¼€å‘æ¶æ„
```
main (ç”Ÿäº§åˆ†æ”¯)
  â”œâ”€â”€ dev (å¼€å‘ä¸»åˆ†æ”¯)
  â”‚   â”œâ”€â”€ feature/backend-setup      [çª—å£1] åç«¯åŸºç¡€è®¾æ–½
  â”‚   â”œâ”€â”€ feature/journal-persistence [çª—å£2] æ—¥è®°æŒä¹…åŒ–
  â”‚   â”œâ”€â”€ feature/chat-backend        [çª—å£3] èŠå¤©åç«¯
  â”‚   â””â”€â”€ feature/frontend-integration [çª—å£4] å‰ç«¯é›†æˆ
```

### æ—¶é—´è¡¨
- **Day 1-2**ï¼šåç«¯æ­å»º + çª—å£2/3å¹¶è¡Œå¼€å‘
- **Day 3**ï¼šçª—å£4å‰ç«¯é›†æˆ
- **Day 4-5**ï¼šæµ‹è¯•ã€åˆå¹¶ã€éƒ¨ç½²

### ä¾èµ–å…³ç³»
```
çª—å£1 (backend-setup) â† æœ€é«˜ä¼˜å…ˆçº§ï¼Œå…¶ä»–çª—å£ä¾èµ–
    â†“
çª—å£2 (journal-persistence) â† å¯ä¸çª—å£3å¹¶è¡Œ
çª—å£3 (chat-backend)        â† å¯ä¸çª—å£2å¹¶è¡Œ
    â†“
çª—å£4 (frontend-integration) â† ä¾èµ–çª—å£2å’Œ3å®Œæˆ
```

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºåˆ†æ”¯ï¼ˆåœ¨ä¸»çª—å£æ‰§è¡Œï¼‰
```bash
# åˆ›å»ºå¼€å‘ä¸»åˆ†æ”¯
git checkout -b dev
git push -u origin dev

# åˆ›å»º4ä¸ªåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/backend-setup
git push -u origin feature/backend-setup

git checkout dev
git checkout -b feature/journal-persistence
git push -u origin feature/journal-persistence

git checkout dev
git checkout -b feature/chat-backend
git push -u origin feature/chat-backend

git checkout dev
git checkout -b feature/frontend-integration
git push -u origin feature/frontend-integration

# å›åˆ°åç«¯è®¾æ–½åˆ†æ”¯
git checkout feature/backend-setup
```

### ç¬¬äºŒæ­¥ï¼šå®‰è£…ä¾èµ–ï¼ˆåœ¨ä¸»çª—å£æ‰§è¡Œï¼‰
```bash
npm install @supabase/supabase-js
npm install -g supabase
```

### ç¬¬ä¸‰æ­¥ï¼šæ‰“å¼€4ä¸ªCCçª—å£
1. **çª—å£1**ï¼šåˆ‡æ¢åˆ° `feature/backend-setup`
2. **çª—å£2**ï¼šåˆ‡æ¢åˆ° `feature/journal-persistence`
3. **çª—å£3**ï¼šåˆ‡æ¢åˆ° `feature/chat-backend`
4. **çª—å£4**ï¼šåˆ‡æ¢åˆ° `feature/frontend-integration`

### ç¬¬å››æ­¥ï¼šåœ¨æ¯ä¸ªçª—å£ä¸­æ‰§è¡Œå¯¹åº”ä»»åŠ¡
- çª—å£1ï¼šé˜…è¯» `docs/tasks/WINDOW_1_BACKEND_SETUP.md`
- çª—å£2ï¼šé˜…è¯» `docs/tasks/WINDOW_2_JOURNAL_PERSISTENCE.md`
- çª—å£3ï¼šé˜…è¯» `docs/tasks/WINDOW_3_CHAT_BACKEND.md`
- çª—å£4ï¼šé˜…è¯» `docs/tasks/WINDOW_4_FRONTEND_INTEGRATION.md`

---

## ğŸ“ æ–‡æ¡£ç»“æ„

```
docs/
â”œâ”€â”€ PARALLEL_DEVELOPMENT.md          # æœ¬æ–‡æ¡£ï¼ˆæ€»è§ˆï¼‰
â”œâ”€â”€ USER_MANUAL.md                   # ç”¨æˆ·æ“ä½œæ‰‹å†Œï¼ˆSupabaseé…ç½®ï¼‰
â”œâ”€â”€ tasks/
â”‚   â”œâ”€â”€ WINDOW_1_BACKEND_SETUP.md    # çª—å£1ä»»åŠ¡æ¸…å•
â”‚   â”œâ”€â”€ WINDOW_2_JOURNAL_PERSISTENCE.md  # çª—å£2ä»»åŠ¡æ¸…å•
â”‚   â”œâ”€â”€ WINDOW_3_CHAT_BACKEND.md     # çª—å£3ä»»åŠ¡æ¸…å•
â”‚   â””â”€â”€ WINDOW_4_FRONTEND_INTEGRATION.md # çª—å£4ä»»åŠ¡æ¸…å•
â””â”€â”€ scripts/
    â”œâ”€â”€ create-branches.sh           # åˆ›å»ºåˆ†æ”¯è„šæœ¬
    â””â”€â”€ merge-branches.sh            # åˆå¹¶åˆ†æ”¯è„šæœ¬
```

---

## âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹

### 1. åˆ†æ”¯éš”ç¦»åŸåˆ™
- **çª—å£2**ï¼šåªä¿®æ”¹æ—¥è®°ç›¸å…³æ–‡ä»¶ï¼ˆ`JournalModal.tsx`, `Calendar.tsx`ï¼‰
- **çª—å£3**ï¼šåªä¿®æ”¹èŠå¤©ç›¸å…³æ–‡ä»¶ï¼ˆ`Chat.tsx`, Edge Functionï¼‰
- **çª—å£4**ï¼šæœ€åé›†æˆï¼Œå¤„ç†æ‰€æœ‰å†²çª

### 2. å…±äº«æ–‡ä»¶åè°ƒ
- `src/types.ts`ï¼šç”±çª—å£1ç»Ÿä¸€ç®¡ç†ï¼Œå…¶ä»–çª—å£åªè¯»
- `src/lib/supabaseClient.ts`ï¼šç”±çª—å£2åˆ›å»ºï¼Œçª—å£3å’Œ4å¤ç”¨
- `.env.local`ï¼šæ‰€æœ‰çª—å£å…±äº«ï¼Œä¸»çª—å£æ›´æ–°åé€šçŸ¥å…¶ä»–çª—å£

### 3. å¼€å‘é¡ºåº
1. **å¿…é¡»å…ˆå®Œæˆçª—å£1**ï¼ˆåˆ›å»ºæ•°æ®åº“è¡¨å’ŒEdge Functionéª¨æ¶ï¼‰
2. **çª—å£2å’Œ3å¯ä»¥å¹¶è¡Œ**ï¼ˆäº’ä¸ä¾èµ–ï¼‰
3. **çª—å£4æœ€åæ‰§è¡Œ**ï¼ˆä¾èµ–çª—å£2å’Œ3çš„äº§å‡ºï¼‰

### 4. æµ‹è¯•ç­–ç•¥
- çª—å£2å’Œ3å®Œæˆåï¼Œå…ˆåœ¨å„è‡ªåˆ†æ”¯æµ‹è¯•
- åˆå¹¶åˆ°devåï¼Œåœ¨çª—å£1è¿›è¡Œé›†æˆæµ‹è¯•
- æ‰€æœ‰åŠŸèƒ½é€šè¿‡åï¼Œåˆå¹¶åˆ°main

---

## ğŸ¯ äº§å‡ºç‰©æ£€æŸ¥æ¸…å•

### çª—å£1ï¼ˆbackend-setupï¼‰
- [ ] `supabase/migrations/001_initial_schema.sql`
- [ ] `supabase/functions/gemini-chat/index.ts`ï¼ˆéª¨æ¶ï¼‰
- [ ] `.env.example`
- [ ] `docs/supabase-setup.md`

### çª—å£2ï¼ˆjournal-persistenceï¼‰
- [ ] `src/lib/supabaseClient.ts`
- [ ] `src/services/supabaseService.ts`ï¼ˆæ—¥è®°éƒ¨åˆ†ï¼‰
- [ ] ä¿®æ”¹åçš„ `src/components/JournalModal.tsx`
- [ ] ä¿®æ”¹åçš„ `src/pages/Calendar.tsx`

### çª—å£3ï¼ˆchat-backendï¼‰
- [ ] å®Œæ•´çš„ `supabase/functions/gemini-chat/index.ts`
- [ ] `src/services/supabaseService.ts`ï¼ˆèŠå¤©éƒ¨åˆ†ï¼‰

### çª—å£4ï¼ˆfrontend-integrationï¼‰
- [ ] é‡æ„åçš„ `src/services/geminiService.ts`
- [ ] ä¿®æ”¹åçš„ `src/pages/Chat.tsx`
- [ ] ä¿®æ”¹åçš„ `src/App.tsx`

---

## ğŸ”„ åˆå¹¶æµç¨‹

### é˜¶æ®µ1ï¼šåˆå¹¶çª—å£1ï¼ˆDay 2ï¼‰
```bash
git checkout dev
git merge feature/backend-setup
git push origin dev
```

### é˜¶æ®µ2ï¼šåˆå¹¶çª—å£2å’Œ3ï¼ˆDay 3ï¼‰
```bash
git checkout dev
git merge feature/journal-persistence
git merge feature/chat-backend
# è§£å†³å†²çªï¼ˆå¦‚æœæœ‰ï¼‰
git push origin dev
```

### é˜¶æ®µ3ï¼šåˆå¹¶çª—å£4ï¼ˆDay 4ï¼‰
```bash
git checkout dev
git merge feature/frontend-integration
# è§£å†³å†²çªï¼ˆå¦‚æœæœ‰ï¼‰
git push origin dev
```

### é˜¶æ®µ4ï¼šåˆå¹¶åˆ°mainï¼ˆDay 5ï¼‰
```bash
# åœ¨devåˆ†æ”¯æµ‹è¯•é€šè¿‡å
git checkout main
git merge dev
git push origin main
```

---

## ğŸ“ çª—å£é—´é€šä¿¡

### çª—å£1å®Œæˆåé€šçŸ¥
```
âœ… çª—å£1å·²å®Œæˆæ•°æ®åº“è¡¨åˆ›å»º
ğŸ“¢ çª—å£2å’Œçª—å£3å¯ä»¥å¼€å§‹å¼€å‘äº†
ğŸ“‹ æ•°æ®åº“è¡¨ï¼šjournals, chat_sessions, chat_messages
ğŸ”— Supabase URL: https://xxx.supabase.co
```

### çª—å£2å®Œæˆåé€šçŸ¥
```
âœ… çª—å£2å·²å®Œæˆæ—¥è®°æŒä¹…åŒ–åŠŸèƒ½
ğŸ“¢ çª—å£4å¯ä»¥å¼€å§‹é›†æˆæ—¥è®°éƒ¨åˆ†
ğŸ“‹ æ–°å¢æ–‡ä»¶ï¼šsupabaseClient.ts, supabaseService.ts
```

### çª—å£3å®Œæˆåé€šçŸ¥
```
âœ… çª—å£3å·²å®ŒæˆèŠå¤©åç«¯åŠŸèƒ½
ğŸ“¢ çª—å£4å¯ä»¥å¼€å§‹é›†æˆèŠå¤©éƒ¨åˆ†
ğŸ“‹ Edge Functionå·²éƒ¨ç½²ï¼šgemini-chat
```

### çª—å£4å®Œæˆåé€šçŸ¥
```
âœ… çª—å£4å·²å®Œæˆå‰ç«¯é›†æˆ
ğŸ“¢ å¯ä»¥å¼€å§‹åˆå¹¶åˆ†æ”¯å’Œæµ‹è¯•
ğŸ“‹ æ‰€æœ‰åŠŸèƒ½å·²è”è°ƒé€šè¿‡
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: çª—å£2å’Œ3åŒæ—¶ä¿®æ”¹äº†åŒä¸€ä¸ªæ–‡ä»¶æ€ä¹ˆåŠï¼Ÿ
**A**: æŒ‰ç…§è®¾è®¡ï¼Œçª—å£2å’Œ3ä¸åº”è¯¥ä¿®æ”¹ç›¸åŒçš„æ–‡ä»¶ã€‚å¦‚æœå‘ç”Ÿå†²çªï¼š
1. æ£€æŸ¥æ˜¯å¦è¿åäº†"åˆ†æ”¯éš”ç¦»åŸåˆ™"
2. åœ¨åˆå¹¶åˆ°devæ—¶æ‰‹åŠ¨è§£å†³å†²çª
3. ä¼˜å…ˆä¿ç•™åŠŸèƒ½å®Œæ•´æ€§

### Q2: çª—å£4ä¾èµ–çª—å£2å’Œ3ï¼Œä½†å®ƒä»¬è¿˜æ²¡å®Œæˆæ€ä¹ˆåŠï¼Ÿ
**A**: çª—å£4åº”è¯¥ç­‰å¾…çª—å£2å’Œ3å®Œæˆåå†å¼€å§‹ã€‚å¯ä»¥ï¼š
1. å…ˆé˜…è¯»çª—å£2å’Œ3çš„ä»£ç 
2. å‡†å¤‡é›†æˆæ–¹æ¡ˆ
3. ç­‰å¾…é€šçŸ¥åç«‹å³å¼€å§‹

### Q3: å¦‚ä½•ç¡®è®¤çª—å£1å·²ç»å®Œæˆï¼Ÿ
**A**: æ£€æŸ¥ä»¥ä¸‹æ ‡å¿—ï¼š
- [ ] Supabaseé¡¹ç›®å·²åˆ›å»º
- [ ] æ•°æ®åº“è¡¨å·²åˆ›å»ºï¼ˆåœ¨Supabase Dashboardä¸­å¯è§ï¼‰
- [ ] Edge Functionéª¨æ¶å·²ç”Ÿæˆ
- [ ] `.env.local`å·²é…ç½®

### Q4: å¼€å‘è¿‡ç¨‹ä¸­å‘ç°éœ€æ±‚å˜æ›´æ€ä¹ˆåŠï¼Ÿ
**A**:
1. åœ¨ä¸»çª—å£ï¼ˆçª—å£1ï¼‰è®°å½•å˜æ›´
2. è¯„ä¼°å½±å“èŒƒå›´ï¼ˆå“ªäº›çª—å£éœ€è¦è°ƒæ•´ï¼‰
3. é€šçŸ¥ç›¸å…³çª—å£
4. ä¼˜å…ˆå®Œæˆå½“å‰ä»»åŠ¡ï¼Œå†å¤„ç†å˜æ›´

---

## ğŸ“Š è¿›åº¦è¿½è¸ª

### Day 1
- [ ] çª—å£1ï¼šåˆ›å»ºSupabaseé¡¹ç›®
- [ ] çª—å£1ï¼šç”Ÿæˆæ•°æ®åº“è¿ç§»è„šæœ¬
- [ ] çª—å£1ï¼šæ‰§è¡Œæ•°æ®åº“è¿ç§»
- [ ] çª—å£1ï¼šé…ç½®Storage
- [ ] çª—å£1ï¼šç”ŸæˆEdge Functionéª¨æ¶

### Day 2
- [ ] çª—å£2ï¼šå¼€å§‹å¼€å‘æ—¥è®°æŒä¹…åŒ–
- [ ] çª—å£3ï¼šå¼€å§‹å¼€å‘èŠå¤©åç«¯
- [ ] çª—å£1ï¼šéƒ¨ç½²Edge Function
- [ ] çª—å£2ï¼šå®Œæˆæ—¥è®°åŠŸèƒ½
- [ ] çª—å£3ï¼šå®ŒæˆèŠå¤©åç«¯

### Day 3
- [ ] çª—å£4ï¼šå¼€å§‹å‰ç«¯é›†æˆ
- [ ] çª—å£4ï¼šå®Œæˆå‰ç«¯é›†æˆ
- [ ] çª—å£1ï¼šæµ‹è¯•çª—å£2å’Œ3çš„äº§å‡º

### Day 4
- [ ] åˆå¹¶æ‰€æœ‰åˆ†æ”¯åˆ°dev
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] Bugä¿®å¤

### Day 5
- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- [ ] ç”Ÿäº§ç¯å¢ƒæµ‹è¯•
- [ ] æ–‡æ¡£æ•´ç†

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. æäº¤ä¿¡æ¯è§„èŒƒ
```
feat(journal): å®ç°æ—¥è®°æŒä¹…åŒ–åŠŸèƒ½
fix(chat): ä¿®å¤æµå¼å“åº”ä¸­æ–­é—®é¢˜
docs(setup): æ›´æ–°Supabaseé…ç½®æ–‡æ¡£
```

### 2. ä»£ç å®¡æŸ¥
- çª—å£2å’Œ3å®Œæˆåï¼Œäº’ç›¸å®¡æŸ¥ä»£ç 
- çª—å£4å®Œæˆåï¼Œçª—å£1å®¡æŸ¥é›†æˆä»£ç 

### 3. æµ‹è¯•è¦†ç›–
- æ¯ä¸ªçª—å£å®Œæˆåï¼Œåœ¨æœ¬åœ°æµ‹è¯•åŠŸèƒ½
- åˆå¹¶åˆ°devåï¼Œè¿›è¡Œé›†æˆæµ‹è¯•
- éƒ¨ç½²å‰ï¼Œè¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•

### 4. æ–‡æ¡£æ›´æ–°
- æ¯ä¸ªçª—å£å®Œæˆåï¼Œæ›´æ–°ç›¸å…³æ–‡æ¡£
- è®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
- æ›´æ–°APIæ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [Supabaseå®˜æ–¹æ–‡æ¡£](https://supabase.com/docs)
- [Gemini APIæ–‡æ¡£](https://ai.google.dev/docs)
- [Gitåˆ†æ”¯ç®¡ç†æœ€ä½³å®è·µ](https://git-scm.com/book/en/v2/Git-Branching-Branching-Workflows)

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹å¹¶è¡Œå¼€å‘å§ï¼ğŸš€**
